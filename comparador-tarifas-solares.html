<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <!-- CSP estricta: scripts inline permitidos solo mediante hashes expl√≠citos. -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; base-uri 'self'; object-src 'none'; script-src 'self' 'wasm-unsafe-eval' 'sha256-NSulPFUPS7KqjCbN4ODy9sZU2uHwIt+hbHfeam4jvmM=' 'sha256-GDdiOWCegw0ObPOUX/uwtHr211aPXBwN/Cvawb5Q8qY=' 'sha256-3oyFQiag7wQucIu1O462W9HBo7CEdCSsrB+8IViSVBI=' 'sha256-YL/Ey5nEtYSBKvljmuz5jIxu3bW0wCVvr4Ok1iq767o=' 'sha256-piO3wpqfRaqIAht45O1r9rcpMVz2fNPpDcLvZS6xCjg=' 'sha256-CFzgFa2uG20jFCq00tDKT2vbgKuaKe1RWFyC9FX3qog='; style-src 'self' 'sha256-0MZ0A3UYpp7yTXhRAv7rjkjV4eSz0X5crn+xH1DynY8='; font-src 'self'; img-src 'self' data: https://luzfija.goatcounter.com; connect-src 'self' https://luzfija.goatcounter.com; worker-src 'self' blob:; form-action 'self';">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="dark light"/>
<meta name="description" content="Compara tarifas el√©ctricas para autoconsumo con tus datos reales. Calcula excedentes y bater√≠a virtual para ver qu√© compa√±√≠a te deja la factura m√°s baja.">
  <meta name="keywords" content="comparador tarifas solares, autoconsumo fotovoltaico, placas solares, bater√≠a virtual, compensaci√≥n excedentes, tarifa luz placas solares, ahorro energ√≠a solar, fotovoltaica, autoconsumo espa√±a, comparar tarifas autoconsumo, excedentes fotovoltaicos, tarifa solar m√°s barata, simulador solar, calculadora autoconsumo">
  <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1">
  <meta name="author" content="LuzFija.es - aLMaX">
  <meta name="theme-color" content="#8B5CF6">
  <meta name="application-name" content="LuzFija Comparador Solar">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Comparador Tarifas">

  <link rel="preconnect" href="https://luzfija.goatcounter.com">
  <script src="/js/config.js"></script>

  <meta property="og:title" content="Comparador de tarifas para placas solares | LuzFija.es">
  <meta property="og:description" content="Compara tarifas el√©ctricas para autoconsumo con tus datos reales. Calcula excedentes y bater√≠a virtual para ver qu√© compa√±√≠a te deja la factura m√°s baja.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://luzfija.es/comparador-tarifas-solares.html">
  <meta property="og:locale" content="es_ES">
  <meta property="og:site_name" content="LuzFija.es">
  <meta property="og:image" content="https://luzfija.es/og.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:type" content="image/png">
  <meta property="og:image:alt" content="Comparador de Tarifas de Luz - Encuentra la m√°s barata en segundos">

  <!-- Logo para Google Search (marca) -->

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Comparador de tarifas para placas solares | LuzFija.es">
  <meta name="twitter:description" content="Compara tarifas el√©ctricas para autoconsumo con tus datos reales. Calcula excedentes y bater√≠a virtual para ver qu√© compa√±√≠a te deja la factura m√°s baja.">
  <meta name="twitter:image" content="https://luzfija.es/og.png">

  <link rel="canonical" href="https://luzfija.es/comparador-tarifas-solares.html">
  <link rel="alternate" hreflang="es-ES" href="https://luzfija.es/comparador-tarifas-solares.html">
  <link rel="alternate" hreflang="x-default" href="https://luzfija.es/comparador-tarifas-solares.html">


  <title>Comparador de tarifas para placas solares | LuzFija.es</title>
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Comparador de Tarifas El√©ctricas para Placas Solares y Autoconsumo",
    "alternateName": "Comparador Solar LuzFija",
    "description": "Herramienta gratuita para comparar todas las tarifas el√©ctricas del mercado espa√±ol usando tus datos reales de autoconsumo fotovoltaico. Calcula compensaci√≥n de excedentes, bater√≠a virtual, y descubre qu√© tarifa te ahorra m√°s dinero cada mes. Sin registro, 100% privado, datos procesados solo en tu navegador.",
    "url": "https://luzfija.es/comparador-tarifas-solares.html",
    "logo": "https://luzfija.es/logo-512.png",
    "applicationCategory": "UtilitiesApplication",
    "operatingSystem": "Any",
    "image": "https://luzfija.es/og.png",
    "inLanguage": "es-ES",
    "browserRequirements": "Requires JavaScript. HTML5 compatible browser.",
    "softwareVersion": "2.0",
    "datePublished": "2024-01-15",
    "dateModified": "2026-01-24",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "EUR",
      "availability": "https://schema.org/InStock",
      "url": "https://luzfija.es/comparador-tarifas-solares.html",
      "priceValidUntil": "2026-12-31",
      "shippingDetails": {
        "@type": "OfferShippingDetails",
        "shippingRate": {
          "@type": "MonetaryAmount",
          "value": "0",
          "currency": "EUR"
        }
      },
      "hasMerchantReturnPolicy": {
        "@type": "MerchantReturnPolicy",
        "returnPolicyCategory": "https://schema.org/MerchantReturnNotApplicable"
      }
    },
    "featureList": [
      "Comparaci√≥n de todas las tarifas el√©ctricas del mercado",
      "C√°lculo de compensaci√≥n de excedentes fotovoltaicos",
      "An√°lisis de bater√≠a virtual mes a mes",
      "Importaci√≥n de datos desde CSV (Datadis, distribuidoras, Iberdrola)",
      "Entrada manual de consumos por periodos",
      "Privacidad total: datos procesados solo en navegador",
      "Ranking autom√°tico por ahorro real",
      "Exportaci√≥n e importaci√≥n de configuraciones",
      "Compatible con tarifas 1P, 2P y 3P",
      "C√°lculo de impuestos (IEE, IVA/IGIC)",
      "Soporte Pen√≠nsula, Canarias, Ceuta y Melilla"
    ],
    "screenshot": "https://luzfija.es/og.png",
    "creator": {
      "@type": "Person",
      "name": "aLMaX",
      "url": "https://luzfija.es"
    },
    "publisher": {
      "@type": "Organization",
      "name": "LuzFija.es",
      "logo": {
        "@type": "ImageObject",
        "url": "https://luzfija.es/logo-512.png"
      }
    }
  }
  </script>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Inicio","item":"https://luzfija.es/"},
      {"@type":"ListItem","position":2,"name":"Comparador Tarifas Placas Solares","item":"https://luzfija.es/comparador-tarifas-solares.html"}
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "HowTo",
    "name": "C√≥mo comparar tarifas el√©ctricas con placas solares",
    "description": "Gu√≠a paso a paso para encontrar la tarifa el√©ctrica m√°s barata para tu instalaci√≥n de autoconsumo fotovoltaico",
    "image": "https://luzfija.es/og.png",
    "totalTime": "PT5M",
    "estimatedCost": {
      "@type": "MonetaryAmount",
      "currency": "EUR",
      "value": "0"
    },
    "step": [
      {
        "@type": "HowToStep",
        "name": "Obt√©n tus datos de consumo",
        "text": "Descarga tu CSV de consumo desde Datadis, tu distribuidora o comercializadora. Tambi√©n puedes introducir los datos manualmente.",
        "position": 1
      },
      {
        "@type": "HowToStep",
        "name": "Sube tu archivo o rellena manualmente",
        "text": "Sube tu CSV haciendo clic en el bot√≥n 'Seleccionar archivo CSV' o introduce tus consumos mensuales por periodos (Punta, Llano, Valle) y excedentes vertidos.",
        "position": 2
      },
      {
        "@type": "HowToStep",
        "name": "Configura tus datos",
        "text": "Introduce tu potencia contratada (P1 y P2), zona fiscal y saldo inicial de bater√≠a virtual si lo tienes.",
        "position": 3
      },
      {
        "@type": "HowToStep",
        "name": "Compara y elige",
        "text": "Pulsa 'Comparar Tarifas' y revisa el ranking completo. Ver√°s cu√°nto pagar√≠as con cada tarifa, compensaci√≥n de excedentes y saldo de bater√≠a virtual acumulado.",
        "position": 4
      }
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {
        "@type":"Question",
        "name":"¬øQu√© significan punta, llano y valle?",
        "acceptedAnswer":{"@type":"Answer","text":"Son periodos horarios con precios distintos en tarifas 3P. En general, punta es m√°s caro, valle m√°s barato y llano intermedio (los horarios exactos dependen del calendario y la tarifa)."}
      },
      {
        "@type":"Question",
        "name":"¬øQu√© es P1 y P2 en la potencia contratada?",
        "acceptedAnswer":{"@type":"Answer","text":"La potencia se paga por d√≠as y puede variar por periodo (P1/P2). En muchas viviendas se contrata la misma potencia en ambos, pero puedes optimizarla seg√∫n tu uso."}
      },
      {
        "@type":"Question",
        "name":"¬øEl comparador incluye impuestos?",
        "acceptedAnswer":{"@type":"Answer","text":"S√≠: el c√°lculo muestra potencia, consumo y una estimaci√≥n de impuestos/IVA seg√∫n el modelo del comparador."}
      },
      {
        "@type":"Question",
        "name":"¬øNecesito registrarme?",
        "acceptedAnswer":{"@type":"Answer","text":"No. Es una herramienta gratuita, sin registro. Puedes adem√°s compartir tu configuraci√≥n por URL."}
      },
      {
        "@type":"Question",
        "name":"¬øDe d√≥nde salen los precios?",
        "acceptedAnswer":{"@type":"Answer","text":"Las tarifas se recopilan de condiciones p√∫blicas de las comercializadoras y se actualizan regularmente. El PVPC se calcula diariamente desde los precios horarios oficiales de REE/ESIOS (indicador 1001)."}
      },
      {
        "@type":"Question",
        "name":"¬øQu√© es el PVPC?",
        "acceptedAnswer":{"@type":"Answer","text":"Es la tarifa regulada de electricidad en Espa√±a, con precios variables por periodos/horas seg√∫n el mercado."}
      },
      {
        "@type":"Question",
        "name":"¬øC√≥mo calcula el comparador el PVPC?",
        "acceptedAnswer":{"@type":"Answer","text":"Usa los datos que introduces (potencias P1/P2, d√≠as y consumos por periodos) y, cuando hay datos disponibles, muestra un PVPC estimado y lo incluye en el ranking."}
      },
      {
        "@type":"Question",
        "name":"¬øC√≥mo funciona con placas solares y autoconsumo?",
        "acceptedAnswer":{"@type":"Answer","text":"El comparador analiza tus datos reales de autoconsumo (CSV) y calcula mes a mes la compensaci√≥n de excedentes seg√∫n el precio de cada comercializadora. Para tarifas con Bater√≠a Virtual (BV), los excedentes sobrantes se acumulan en euros para descontarlos en meses futuros. El ranking ordena todas las tarifas del mercado por ahorro real, mostrando cu√°nto pagar√≠as con cada una y qu√© saldo BV acumular√≠as."}
      },
      {
        "@type":"Question",
        "name":"¬øQu√© es la bater√≠a virtual en tarifas el√©ctricas?",
        "acceptedAnswer":{"@type":"Answer","text":"La bater√≠a virtual es un sistema que permite acumular en euros el valor de los excedentes fotovoltaicos que no se compensan en el mes actual, para usarlos como descuento en facturas futuras. Es como una hucha de energ√≠a solar en forma de dinero, sin necesidad de instalar bater√≠as f√≠sicas."}
      },
      {
        "@type":"Question",
        "name":"¬øPuedo comparar tarifas sin subir ning√∫n archivo?",
        "acceptedAnswer":{"@type":"Answer","text":"S√≠, puedes introducir manualmente tus consumos mensuales por periodos (Punta, Llano, Valle) y excedentes vertidos. La tabla manual est√° siempre visible y puedes rellenar solo los meses que quieras simular. Tambi√©n puedes exportar e importar tus datos para no perderlos."}
      },
      {
        "@type":"Question",
        "name":"¬øQu√© formatos de CSV acepta el comparador?",
        "acceptedAnswer":{"@type":"Answer","text":"Acepta CSV de Datadis, distribuidoras (Naturgy, Endesa, Iberdrola, UFD, etc.), archivos de comercializadoras y tambi√©n archivos Excel (.xlsx, .xls). El sistema detecta autom√°ticamente el formato y extrae los datos de consumo y excedentes."}
      },
      {
        "@type":"Question",
        "name":"¬øMis datos de consumo son privados?",
        "acceptedAnswer":{"@type":"Answer","text":"S√≠, 100% privados. Todos los c√°lculos se realizan localmente en tu navegador. Tus datos de consumo, CSV y configuraciones NUNCA se env√≠an a ning√∫n servidor. Todo queda guardado solo en tu navegador si as√≠ lo deseas."}
      }
    ]
  }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "LuzFija.es",
    "alternateName": "Luzfija",
    "url": "https://luzfija.es",
    "logo": {
      "@type": "ImageObject",
      "url": "https://luzfija.es/logo-512.png",
      "width": 512,
      "height": 512,
      "caption": "LuzFija.es - Comparador de Tarifas El√©ctricas"
    },
    "description": "Comparador gratuito de tarifas de luz en Espa√±a. Calcula tu factura con discriminaci√≥n horaria, placas solares y PVPC.",
    "email": "hola@luzfija.es",
    "foundingDate": "2023",
    "sameAs": [
      "https://luzfija.es"
    ],
    "contactPoint": {
      "@type": "ContactPoint",
      "contactType": "customer support",
      "email": "hola@luzfija.es",
      "availableLanguage": ["es"]
    },
    "areaServed": {
      "@type": "Country",
      "name": "Espa√±a"
    },
    "serviceType": "Comparador de tarifas el√©ctricas"
  }
  </script>

  <script src="/js/theme.js?v=20260218-153241"></script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "C√≥mo encontrar la mejor tarifa el√©ctrica con placas solares",
    "description": "Gu√≠a completa para usuarios de autoconsumo fotovoltaico: c√≥mo comparar tarifas, calcular compensaci√≥n de excedentes y maximizar el ahorro con bater√≠a virtual.",
    "image": "https://luzfija.es/og.png",
    "datePublished": "2024-01-15T08:00:00+01:00",
    "dateModified": "2026-01-24T15:30:00+01:00",
    "author": {
      "@type": "Person",
      "name": "aLMaX",
      "url": "https://luzfija.es"
    },
    "publisher": {
      "@type": "Organization",
      "name": "LuzFija.es",
      "logo": {
        "@type": "ImageObject",
        "url": "https://luzfija.es/logo-512.png"
      }
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://luzfija.es/comparador-tarifas-solares.html"
    },
    "keywords": "tarifas solares, autoconsumo fotovoltaico, compensaci√≥n excedentes, bater√≠a virtual, placas solares, ahorro energ√≠a",
    "articleSection": "Energ√≠a Solar",
    "articleBody": "El comparador permite a usuarios con instalaciones fotovoltaicas encontrar la tarifa el√©ctrica m√°s econ√≥mica analizando datos reales de consumo y excedentes. Calcula autom√°ticamente la compensaci√≥n de excedentes y el funcionamiento de la bater√≠a virtual mes a mes."
  }
  </script>

    <link rel="stylesheet" href="/styles.css?v=20260218-153241">
    <link rel="stylesheet" href="/pro.css?v=20260218-153241">
  <!-- CSS del desglose (solo se usa al abrir el modal). Se carga sin bloquear el render inicial -->
  <link rel="preload" href="/desglose-factura.css" as="style">
  <link rel="stylesheet" href="/desglose-factura.css" media="all">
  <noscript><link rel="stylesheet" href="/desglose-factura.css"></noscript>

  <!-- PDF.js se carga din√°micamente cuando el usuario sube una factura (ver factura.js) -->
  <link rel="preload" href="/fonts/outfit-latin-400-normal.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="stylesheet" href="/fonts.css">
  <link rel="stylesheet" href="/bv-sim.css">
  <link rel="stylesheet" href="/comparador-solar-mejorado.css">

    <meta name="theme-color" content="#8B5CF6">

<style id="lf-inline-style-map">
.lf-inline-s1{width:100%;height:100%;}
.lf-inline-s2{stop-color:#fbbf24;stop-opacity:1}
.lf-inline-s3{stop-color:#f59e0b;stop-opacity:1}
.lf-inline-s4{stop-color:#8b5cf6;stop-opacity:1}
.lf-inline-s5{stop-color:#6366f1;stop-opacity:1}
.lf-inline-s6{text-decoration:none; font-weight:bold;}
.lf-inline-s7{margin-bottom: 24px; color:var(--muted); font-size: 0.95rem;}
.lf-inline-s8{gap: 16px;}
.lf-inline-s9{grid-column: 1 / -1;}
.lf-inline-s10{font-size:11px; color:var(--muted); margin-top:4px;}
.lf-inline-s11{grid-column: 1 / -1; display:none;}
.lf-inline-s12{grid-column: 1 / -1; margin-top: 12px;}
.lf-inline-s13{background: rgba(255,255,255,0.03); border: 1px dashed var(--border);}
.lf-inline-s14{font-size: 13px; padding: 10px; display: flex; justify-content: space-between; align-items: center;}
.lf-inline-s15{font-size: 11px; color: var(--muted); margin-right: 8px; display: none;}
.lf-inline-s16{padding: 16px; display: grid; gap: 16px;}
.lf-inline-s17{display: flex; align-items: start; gap: 10px;}
.lf-inline-s18{font-size: 18px; flex-shrink: 0;}
.lf-inline-s19{display: block; margin-bottom: 4px;}
.lf-inline-s20{color: var(--muted2); font-size: 11px; line-height: 1.5;}
.lf-inline-s21{gap: 10px;}
.lf-inline-s22{margin-top: 4px;}
.lf-inline-s23{margin-top: 8px;}
.lf-inline-s24{display: flex; align-items: center; gap: 8px; cursor: pointer; user-select: none;}
.lf-inline-s25{width: auto; cursor: pointer;}
.lf-inline-s26{font-size: 13px;}
.lf-inline-s27{display: flex; gap: 8px; margin-top: 12px;}
.lf-inline-s28{flex: 1; display: none;}
.lf-inline-s29{display:none}
.lf-inline-s30{display: none;}
.lf-inline-s31{font-weight: 900; color: var(--accent);}
.lf-inline-s32{font-weight: 700;}
.lf-inline-s33{display: none; margin-top: 12px; padding: 10px; background: rgba(139, 92, 246, 0.1); border-radius: 8px; border: 1px solid rgba(139, 92, 246, 0.3);}
.lf-inline-s34{display: grid; grid-template-columns: 1fr 1fr; gap: 12px; font-size: 12px;}
.lf-inline-s35{color: var(--muted); margin-bottom: 4px;}
.lf-inline-s36{font-size: 16px; font-weight: 700; color: var(--accent);}
.lf-inline-s37{font-size: 1.1rem;}
.lf-inline-s38{display:grid; grid-template-columns:repeat(auto-fit, minmax(240px, 1fr)); gap:30px; margin-bottom:30px;}
.lf-inline-s39{color:var(--muted); font-size:12px; line-height:1.6; margin:0 0 12px 0;}
.lf-inline-s40{color:var(--accent); font-weight:700; text-decoration:none; display:inline-flex; align-items:center; gap:6px; font-size:13px; transition: opacity 0.2s;}
.lf-inline-s41{font-size:10px;}
.lf-inline-s42{color:var(--danger);}
.lf-inline-s43{color:var(--warn);}
.lf-inline-s44{color:var(--accent2);}
.lf-inline-s45{text-decoration:underline;}
.lf-inline-s46{margin-top:30px; padding:28px 20px 24px; border-top:1px solid rgba(255,255,255,0.05); text-align:center;}
.lf-inline-s47{font-size:11px; opacity:0.5; margin-bottom:8px;}
.lf-inline-s48{margin-top:18px; padding-top:14px; border-top:1px solid var(--border);}
.lf-inline-s49{color:inherit; text-decoration:none; font-weight:600;}
</style>
</head>

<body class="solar-pro">
  <a class="skip-link" href="#main">Saltar al contenido</a>
<div class="container">
    <div class="topbar">
      <div class="brand">
        <span class="particle" aria-hidden="true"></span><span class="particle" aria-hidden="true"></span><span class="particle" aria-hidden="true"></span><span class="particle" aria-hidden="true"></span><span class="particle" aria-hidden="true"></span><span class="particle" aria-hidden="true"></span>
        <a class="logo" href="/" aria-label="Inicio">
          <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="lf-inline-s1">
            <!-- ... (logo content matches original) ... -->
            <defs>
              <linearGradient id="logoGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" class="lf-inline-s2">
                  <animate attributeName="stop-color" values="#fbbf24;#f59e0b;#fbbf24" dur="2s" repeatCount="indefinite"/>
                </stop>
                <stop offset="50%" class="lf-inline-s3"/>
                <stop offset="100%" class="lf-inline-s2">
                  <animate attributeName="stop-color" values="#fbbf24;#f59e0b;#fbbf24" dur="2s" repeatCount="indefinite"/>
                </stop>
              </linearGradient>
              <linearGradient id="logoGrad2" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" class="lf-inline-s4"/>
                <stop offset="100%" class="lf-inline-s5"/>
              </linearGradient>
              <filter id="glow">
                <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                <feMerge>
                  <feMergeNode in="coloredBlur"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>
            <circle cx="50" cy="50" r="35" fill="url(#logoGrad2)" opacity="0.2">
              <animate attributeName="r" values="35;38;35" dur="2s" repeatCount="indefinite"/>
              <animate attributeName="opacity" values="0.2;0.4;0.2" dur="2s" repeatCount="indefinite"/>
            </circle>
            <path d="M 55 15 L 35 48 L 48 48 L 45 85 L 70 45 L 57 45 Z"
                  fill="url(#logoGrad1)" filter="url(#glow)"
                  stroke="#fff" stroke-width="1.5" stroke-linejoin="round">
              <animateTransform attributeName="transform" attributeType="XML" type="scale"
                                values="1;1.08;1" dur="1.5s" repeatCount="indefinite" additive="sum"/>
            </path>
            <circle cx="30" cy="30" r="2" fill="#fbbf24" opacity="0">
              <animate attributeName="opacity" values="0;1;0" dur="1.5s" repeatCount="indefinite"/>
              <animate attributeName="r" values="2;3;2" dur="1.5s" repeatCount="indefinite"/>
            </circle>
            <circle cx="70" cy="35" r="2" fill="#fbbf24" opacity="0">
              <animate attributeName="opacity" values="0;1;0" dur="1.5s" begin="0.5s" repeatCount="indefinite"/>
              <animate attributeName="r" values="2;3;2" dur="1.5s" begin="0.5s" repeatCount="indefinite"/>
            </circle>
            <circle cx="65" cy="70" r="2" fill="#fbbf24" opacity="0">
              <animate attributeName="opacity" values="0;1;0" dur="1.5s" begin="1s" repeatCount="indefinite"/>
              <animate attributeName="r" values="2;3;2" dur="1.5s" begin="1s" repeatCount="indefinite"/>
            </circle>
          </svg>
        </a>
        <div>
          <nav aria-label="Breadcrumb" class="u-mb-8">
            <ol class="breadcrumb">
              <li><a href="/" class="lf-inline-s6">&larr; Volver al Comparador</a></li>
            </ol>
          </nav>
                    <h1>Comparador de Tarifas El√©ctricas con Placas Solares y Autoconsumo</h1>
                    <p>Analiza tus datos reales de consumo fotovoltaico y descubre qu√© tarifa te ahorra m√°s con compensaci√≥n de excedentes y bater√≠a virtual</p>
                  </div>
                </div>
          
                      <div class="actions">
                        <div class="actions-center">
                          <a href="/" class="btn" aria-label="Ir al comparador principal">
                            <span>üè†</span><span class="btn-text">Comparador</span>
                          </a>
                          <a href="/estadisticas/" class="btn" aria-label="Ir al observatorio PVPC">
                            <span>‚ö°</span><span class="btn-text">PVPC</span>
                          </a>
                        </div>

                        <div class="actions-right">
                          <button class="btn" id="btnTheme" type="button" title="Cambiar tema" aria-label="Cambiar tema">üåì</button>
                          <div class="menu" id="menuRoot">
                            <button class="btn" id="btnMenu" type="button" aria-haspopup="menu" aria-controls="menuPanel" aria-expanded="false" title="Opciones" aria-label="Abrir men√∫ de opciones">‚öôÔ∏è</button>
                            <div class="menuPanel" id="menuPanel" role="menu" aria-label="Opciones" aria-orientation="vertical" aria-hidden="true">
                              <div class="menuHint">Opciones</div>
                              <a class="menuItem" role="menuitem" href="/">üè† Comparador principal</a>
                              <a class="menuItem" role="menuitem" href="/estadisticas/">‚ö° Observatorio PVPC</a>
                              <a class="menuItem" role="menuitem" href="/guias.html">üìö Gu√≠as</a>
                              <div class="menuDivider"></div>
                              <a class="menuItem u-no-underline" href="mailto:hola@luzfija.es" role="menuitem">
                                <span class="mi-left">‚úâÔ∏è Contacto</span>
                                <span class="mi-right">email</span>
                              </a>
                              <div class="menuDivider"></div>
                              <button class="menuItem" id="btnClearCache" type="button" role="menuitem" aria-label="Limpiar cach√©">
                                <span class="mi-left">üóëÔ∏è Limpiar cach√©</span>
                                <span class="mi-right">web</span>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
              </div>
          
              <main id="main" tabindex="-1">
                <section class="card">
                  <div class="head">
                    <div class="kicker">Simulador con Datos Reales</div>
                    <div class="title">Comparador de Tarifas para Autoconsumo Fotovoltaico</div>
                  </div>
                  <div class="body">
                    <p class="lf-inline-s7">
                      Sube tu CSV de consumo para auto-rellenar la tabla o introduce los datos manualmente mes a mes. Compara todas las tarifas del mercado y descubre cu√°l te ahorra m√°s dinero con compensaci√≥n de excedentes y bater√≠a virtual.
                    </p>

                    <div class="bv-form-container">
                      <!-- Inputs Comunes (Izquierda) -->
                      <div class="form bv-form-2col lf-inline-s8">
                        
                        <div class="group">
                          <label for="bv-p1">Potencia P1 (kW)</label>
                          <input class="input" type="text" id="bv-p1" inputmode="decimal" value="3,45" placeholder="Ej: 3,45">
                        </div>

                        <div class="group">
                          <label for="bv-p2">Potencia P2 (kW)</label>
                          <input class="input" type="text" id="bv-p2" inputmode="decimal" value="3,45" placeholder="Ej: 3,45">
                        </div>

                        <div class="group lf-inline-s9">
                          <label for="bv-saldo-inicial">Saldo en Hucha (‚Ç¨)</label>
                          <input class="input" type="text" id="bv-saldo-inicial" inputmode="decimal" value="0,00" placeholder="0,00">
                          <div class="lf-inline-s10">Si ya tienes dinero acumulado de meses anteriores.</div>
                        </div>

                        <div class="group lf-inline-s9">
                          <label for="bv-zona-fiscal">Zona Fiscal</label>
                          <select id="bv-zona-fiscal" class="input">
                            <option value="Pen√≠nsula">Pen√≠nsula y Baleares</option>
                            <option value="Canarias">Canarias</option>
                            <option value="CeutaMelilla">Ceuta y Melilla</option>
                          </select>
                        </div>

                        <div class="group" id="bv-vivienda-canarias-wrapper" class="lf-inline-s11">
                          <label class="fv-check">
                            <input id="bv-vivienda-canarias" type="checkbox" checked>
                            <span>Es Vivienda (IGIC 0%)</span>
                          </label>
                        </div>

                        <!-- Tarifa Actual (Opcional) -->
                        <div class="lf-inline-s12">
                          <details class="seoDetails lf-inline-s13">
                            <summary class="lf-inline-s14">
                              <span>‚≠ê Comparar con mi tarifa actual</span>
                              <span id="bv-custom-tarifa-indicator" class="lf-inline-s15" title="Datos guardados en tu navegador"></span>
                            </summary>
                            <div class="lf-inline-s16">

                              <!-- Info box explicativo -->
                              <div class="info-box">
                                <div class="lf-inline-s17">
                                  <span class="lf-inline-s18">üí°</span>
                                  <div>
                                    <strong class="lf-inline-s19">Busca estos precios en tu factura</strong>
                                    <div class="lf-inline-s20">
                                      Normalmente aparecen en la secci√≥n de "Detalle del importe" o "T√©rminos de facturaci√≥n"
                                    </div>
                                  </div>
                                </div>
                              </div>

                              <!-- T√©rmino de Potencia -->
                              <div class="mt-seccion-header">
                                <span class="mt-seccion-icon">üìä</span>
                                <h4 class="mt-seccion-title">T√©rmino de potencia</h4>
                                <span class="mt-seccion-subtitle">Precio por kW contratado/d√≠a</span>
                              </div>
                              <div class="form bv-form-2col lf-inline-s21">
                                <div class="group">
                                  <label for="mtP1">Potencia P1 (‚Ç¨/kW¬∑d√≠a)</label>
                                  <input id="mtP1" class="input" type="text" inputmode="decimal" placeholder="Ej: 0,0891">
                                </div>
                                <div class="group">
                                  <label for="mtP2">Potencia P2 (‚Ç¨/kW¬∑d√≠a)</label>
                                  <input id="mtP2" class="input" type="text" inputmode="decimal" placeholder="Ej: 0,0445">
                                </div>
                              </div>

                              <!-- T√©rmino de Energ√≠a -->
                              <div class="mt-seccion-header lf-inline-s22">
                                <span class="mt-seccion-icon">‚ö°</span>
                                <h4 class="mt-seccion-title">T√©rmino de energ√≠a</h4>
                                <span class="mt-seccion-subtitle">Precio por kWh consumido</span>
                              </div>
                              <div class="form bv-form-3col lf-inline-s21">
                                <div class="group">
                                  <label for="mtPunta">Punta (‚Ç¨/kWh)</label>
                                  <input id="mtPunta" class="input" type="text" inputmode="decimal" placeholder="Ej: 0,1543">
                                </div>
                                <div class="group">
                                  <label for="mtLlano">Llano (‚Ç¨/kWh)</label>
                                  <input id="mtLlano" class="input" type="text" inputmode="decimal" placeholder="Ej: 0,1234">
                                </div>
                                <div class="group">
                                  <label for="mtValle">Valle (‚Ç¨/kWh)</label>
                                  <input id="mtValle" class="input" type="text" inputmode="decimal" placeholder="Ej: 0,0899">
                                </div>
                              </div>

                              <!-- Compensaci√≥n de Excedentes -->
                              <div class="mt-seccion-header lf-inline-s22">
                                <span class="mt-seccion-icon">‚òÄÔ∏è</span>
                                <h4 class="mt-seccion-title">Compensaci√≥n de excedentes</h4>
                                <span class="mt-seccion-subtitle">Precio que te pagan por verter a la red</span>
                              </div>
                              <div class="group">
                                <label for="mtExc">Precio compensaci√≥n (‚Ç¨/kWh)</label>
                                <input id="mtExc" class="input" type="text" inputmode="decimal" placeholder="Ej: 0,0743">
                              </div>

                              <div class="group lf-inline-s23">
                                <label class="lf-inline-s24">
                                  <input id="mtBV" type="checkbox" class="lf-inline-s25">
                                  <span class="lf-inline-s26">Tiene bater√≠a virtual (acumula excedentes no compensados)</span>
                                </label>
                              </div>

                              <div class="lf-inline-s27">
                                <button type="button" id="bv-clear-custom-tarifa" class="btn btn-secondary lf-inline-s28">
                                  üóëÔ∏è Limpiar datos guardados
                                </button>
                              </div>

                            </div>
                          </details>
                        </div>

                      </div>
          
                      <!-- Zona de Datos -->
                      <div id="bv-data-zone">
                        <!-- Upload Zone Compacta -->
                        <div class="bv-upload-compact">
                          <input class="bv-file-input" type="file" id="bv-file" accept=".csv,.xlsx,.xls,text/csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel" aria-label="Subir archivo CSV o XLSX para autocompletar datos" class="lf-inline-s29">

                          <div class="bv-upload-header">
                            <div class="bv-upload-title">
                              <span class="bv-upload-icon-small">üìÑ</span>
                              <span>Subir CSV para auto-rellenar</span>
                            </div>
                            <div class="bv-upload-hint">Soporta Datadis, Distribuidoras, Iberdrola y Excel</div>
                          </div>

                          <button type="button" class="btn bv-upload-btn" id="upload-csv-btn">
                            <span>üìÅ Seleccionar archivo CSV</span>
                          </button>

                          <div class="bv-file-selected-inline" id="file-selected-msg" class="lf-inline-s29">
                            <span class="bv-file-status-icon">‚úì</span>
                            <span class="bv-file-name" id="file-name">archivo.csv</span>
                            <button type="button" class="bv-remove-file-inline" id="remove-file" aria-label="Eliminar archivo">‚úï</button>
                          </div>

                          <div class="bv-observatorio-cta" role="note" aria-label="Compensaci√≥n real PVPC">
                            <div class="bv-observatorio-title">üîé Compensaci√≥n real en PVPC (tu CSV)</div>
                            <div class="bv-observatorio-text">
                              Calcula cu√°nto te habr√≠an compensado los excedentes con el <strong>hist√≥rico oficial PVPC</strong> (REE/ESIOS).
                            </div>
                            <a class="btn bv-observatorio-btn" href="/estadisticas/?type=surplus#csv-excedentes">
                              Ver en Observatorio PVPC
                            </a>
                          </div>

                          <div class="bv-upload-divider">
                            <span>o rellena manualmente</span>
                          </div>
                        </div>

                        <!-- Tabla Manual (Siempre Visible) -->
                        <div id="bv-manual-zone">
                          <div class="bv-manual-container">
                            <div class="bv-manual-scroll-wrapper">
                              <!-- Header con tooltips descriptivos -->
                              <div class="bv-manual-header">
                                <span>Mes</span>
                                <span title="Consumo en periodo Punta (10-14h y 18-22h laborables)">C. Punta (kWh)</span>
                                <span title="Consumo en periodo Llano (8-10h, 14-18h, 22-24h laborables)">C. Llano (kWh)</span>
                                <span title="Consumo en periodo Valle (0-8h + fines de semana y festivos)">C. Valle (kWh)</span>
                                <span title="Excedentes vertidos a la red (kWh)">Vertido</span>
                              </div>
                              <div id="bv-manual-grid" class="bv-manual-grid-scroll">
                                <!-- Se generar√° por JS -->
                              </div>

                              <!-- Fila de totales detallados -->
                              <div id="bv-manual-totals-row" class="bv-manual-totals-row lf-inline-s30">
                                <span class="lf-inline-s31">TOTAL</span>
                                <span id="bv-total-p1" class="lf-inline-s32">0</span>
                                <span id="bv-total-p2" class="lf-inline-s32">0</span>
                                <span id="bv-total-p3" class="lf-inline-s32">0</span>
                                <span id="bv-total-vert" class="lf-inline-s32">0</span>
                              </div>
                            </div>

                            <!-- Totales generales -->
                            <div id="bv-manual-totals-summary" class="lf-inline-s33">
                              <div class="lf-inline-s34">
                                <div>
                                  <div class="lf-inline-s35">Consumo total anual</div>
                                  <div class="lf-inline-s36">
                                    <span id="bv-total-consumo">0</span> kWh
                                  </div>
                                </div>
                                <div>
                                  <div class="lf-inline-s35">Excedentes total anual</div>
                                  <div class="lf-inline-s36">
                                    <span id="bv-total-excedentes">0</span> kWh
                                  </div>
                                </div>
                              </div>
                            </div>

                            <!-- Privacidad y Controles -->
                            <div class="bv-privacy-panel">
                              <div class="bv-privacy-info">
                                <span class="bv-privacy-icon">üîí</span>
                                <div class="bv-privacy-text">
                                  <strong>Privacidad total:</strong> Tus datos se guardan autom√°ticamente <strong>solo en tu navegador</strong>. Nunca se env√≠an a ning√∫n servidor.
                                </div>
                              </div>
                              <div class="bv-privacy-status">
                                <span id="bv-save-indicator" class="bv-save-indicator" role="status" aria-live="polite" aria-atomic="true"></span>
                                <div id="bv-data-status" class="bv-data-status" role="status" aria-live="polite" aria-atomic="true"></div>
                              </div>
                            </div>

                            <div class="bv-controls-wrapper">
                              <div class="bv-controls-hint">
                                Rellena solo los meses que quieras simular (ej: marzo a noviembre).
                              </div>
                              <div class="bv-controls-buttons">
                                <button type="button" id="bv-export-manual" class="bv-control-btn" title="Descargar datos como archivo JSON (backup local)">üíæ Exportar</button>
                                <button type="button" id="bv-import-manual" class="bv-control-btn" title="Cargar datos desde archivo JSON">üìÇ Importar</button>
                                <button type="button" id="bv-reset-manual" class="bv-reset-btn">üóëÔ∏è Borrar</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                    </div>
          
                    <div class="u-mt-24">
                      <button class="btn primary" id="bv-simulate" type="button" aria-controls="bv-results-container">
                        <span class="bv-btn-text lf-inline-s37">Comparar Tarifas y Ver Ahorro &rarr;</span>
                        <span class="spinner lf-inline-s29"></span>
                      </button>
                    </div>
                  </div>
                </section>
          
                <!-- Resultados (Ocultos por defecto) -->
                <div id="bv-results-container" class="fade-container lf-inline-s29">
                  <section class="card u-mt-16">
                    <div id="bv-results"></div>
                  </section>
                </div>
          
                <!-- Estado (Oculto por defecto o integrado en notificaciones) -->
                <div id="bv-status-container" class="lf-inline-s29">
                  <section class="card u-mt-16">
                    <div class="head">
                      <h2>Estado</h2>
                    </div>
                    <div id="bv-status"></div>
                  </section>
                </div>
              </main>
          
              <footer class="footer-container">
                <div class="lf-inline-s38">
                          <div>
                            <h3 class="u-h3-strong-10">Sobre el Comparador</h3>
                            <p class="lf-inline-s39">
                              Herramienta avanzada para <strong>comparar tarifas solares</strong> usando tus datos reales de autoconsumo y excedentes.
                            </p>
                            <p class="u-m-0">
                              <a href="/guias.html" class="lf-inline-s40">
                                üìö Gu√≠as sobre tarifas el√©ctricas
                                <span class="lf-inline-s41">‚Üí</span>
                              </a>
                            </p>
                          </div>
                  
                          <div>
                            <h3 class="u-h3-strong-10">Horarios Discriminaci√≥n</h3>
                            <ul class="u-list-muted-12">
                              <li><strong class="lf-inline-s42">Punta:</strong> 10h-14h y 18h-22h</li>
                              <li><strong class="lf-inline-s43">Llano:</strong> 8h-10h, 14h-18h, 22h-24h</li>
                              <li><strong class="lf-inline-s44">Valle:</strong> 0h-8h + fines de semana</li>
                            </ul>
                          </div>
                  
                          <div>
                            <h3 class="u-h3-strong-10">¬øQu√© Analizamos?</h3>
                            <ul class="u-list-muted-12">
                              <li>‚úì Todas las tarifas del mercado</li>
                              <li>‚úì Compensaci√≥n de excedentes (‚Ç¨)</li>
                              <li>‚úì Bater√≠a Virtual (acumulaci√≥n)</li>
                              <li>‚úì PVPC regulada (datos REE)</li>
                              <li>‚úì Ranking por ahorro real mensual</li>
                            </ul>
                          </div>
                  
                          <div id="contacto">
                            <h3 class="u-h3-strong-10">Contacto</h3>
                            <div class="contact-box">
                              <div class="u-label-xs">‚úâÔ∏è Email</div>
                              <a href="mailto:hola@luzfija.es" class="u-color-accent u-fw-900 u-text-13 lf-inline-s45">hola@luzfija.es</a>
                            </div>
                          </div>
                        </div>
                  
                        <div class="lf-inline-s46">
                          <p class="lf-inline-s47">‚ö° LuzFija.es ¬∑ Comparador de Tarifas Solares</p>
                          <p class="u-text-10 u-opacity-40">Proyecto gratuito y sin publicidad ¬∑ Tarifas actualizadas regularmente</p>
                  
                          <div class="lf-inline-s48">
                            <div class="u-max-w-720 u-center-text-padded">
                              <p class="u-mt-10 u-text-10 u-opacity-65 u-leading-15">
                                Anal√≠tica sin cookies ¬∑ <a href="/privacidad.html" class="u-link-accent">Pol√≠tica de privacidad</a> ¬∑ <a href="/aviso-legal.html" class="u-link-accent">Aviso legal</a>
                              </p>
                              <div class="footer-credits">Desarrollado por <a href="https://github.com/almax-es" target="_blank" rel="noopener noreferrer" class="lf-inline-s49">aLMaX</a></div>
                            </div>
                          </div>
                        </div>              </footer>
            </div>
          
            <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true"><span class="dot" id="toastDot" aria-hidden="true"></span><span id="toastText"></span></div>
          
            <!-- ‚ö†Ô∏è ORDEN CR√çTICO: lf-csv-utils.js DEBE cargarse ANTES que bv-sim-monthly.js -->
            <script src="/js/lf-config.js"></script>
            <script src="/js/lf-utils.js"></script>
            <script src="/js/lf-csv-utils.js"></script>
            <script src="/js/bv/bv-import.js"></script>
            <script src="/js/bv/bv-sim-monthly.js"></script>
            <script src="/js/bv/bv-ui.js"></script>
            <script src="/js/shell-lite.js?v=20260218-153241" defer></script>
          </body></html>
